<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/styles.css') }}">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet">
    <title>Curious Minds Blogspace</title>
    <link rel="shortcut icon" type="image/x-icon"
        href="https://static.vecteezy.com/system/resources/previews/001/201/180/original/brain-png.png" />

    <style>
        canvas {
            max-width: 100%;
            height: auto;
        }

        #chartContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 40vh;
            /* Adjust the height as needed */
        }
    </style>

    <!-- Include Chart.js library from a CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbar">
            <div class="navbar-nav">
                <a class="nav-item nav-link" id="user_list" href="/user_list">All Users</a>
                <a class="nav-item nav-link" id="home" href="/admin_home">All Blogs</a>
                <a class="nav-item nav-link" id="dashboard" href="/dashboard">Dashboard</a>
                <a class="nav-item nav-link" id="logout" href="/logout">Log out ({{ current_user.username }})</a>
                <!-- toggle button -->
                <div id="toggle-button" class="">
                    <i class="indicator"></i>
                </div>
            </div>
        </div>
    </nav>
    <br><br>
    <div id="chartContainer">
        <canvas id="myChart"></canvas>

    </div>
    <div style="text-align: center;">This chart displays the number of published articles per user.</div>
    <script>
        var ctx = document.getElementById('myChart').getContext('2d');
        var data = {
            {
                data | tojson
            }
        };
        console.log(data);
        var labels = data.map(function (item) {
            return item.label
        });

        var values = data.map(function (item) {
            return Math.round(item.value)
        });



        const options = {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    data: values,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(255, 206, 86, 0.7)',
                        'rgba(75, 192, 192, 0.7)',
                        'rgba(153, 102, 255, 0.7)',
                        'rgba(255, 159, 64, 0.7)'
                    ]
                }]
            },
            options: {
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        };



        var chart = new Chart(ctx, options);
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>
</body>

</html>